$schema: 'https://moonrepo.dev/schemas/project.json'

id: mcp
language: 'typescript'
dependsOn:
  - 'core'
  - 'dice'
  - 'notation'

tasks:
  tsCheck:
    deps:
      - 'core:build'
      - 'dice:build'
      - 'notation:build'

  build:
    command: 'tsc && chmod 755 dist/index.js'
    args: []
    inputs:
      - 'src/**/*'
    outputs:
      - 'dist/**/*'
    deps:
      - 'core:build'
      - 'dice:build'
      - 'notation:build'
    options:
      cache: false
      mergeArgs: 'replace'
      mergeEnv: 'replace'

  test:
    deps:
      - 'core:build'
      - 'dice:build'
      - 'notation:build'

  lint:
    deps:
      - 'core:build'
      - 'dice:build'
      - 'notation:build'
  start:
    command: 'node dist/index.js --transport http'
    deps:
      - 'build'
    options:
      cache: false
