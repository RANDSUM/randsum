$schema: 'https://moonrepo.dev/schemas/project.json'

id: robo
language: 'typescript'
dependsOn:
  - 'roller'
  - 'fifth'
  - 'blades'
  - 'daggerheart'
  - 'root-rpg'
  - 'salvageunion'

tasks:
  tsCheck:
    deps:
      - 'roller:build'
      - 'fifth:build'
      - 'blades:build'
      - 'daggerheart:build'
      - 'root-rpg:build'
      - 'salvageunion:build'

  build:
    command: 'robox build'
    args: []
    inputs:
      - 'src/**/*'
    outputs:
      - 'dist/**/*'
    deps:
      - 'roller:build'
      - 'fifth:build'
      - 'blades:build'
      - 'daggerheart:build'
      - 'root-rpg:build'
      - 'salvageunion:build'
    options:
      cache: false
      mergeArgs: 'replace'
      mergeEnv: 'replace'

  test:
    deps:
      - 'roller:build'
      - 'fifth:build'
      - 'blades:build'
      - 'daggerheart:build'
      - 'root-rpg:build'
      - 'salvageunion:build'
    command: 'echo "No Tests"'
    args: []
    inputs:
      - 'src/**/*'
      - '__tests__/**/*'
      - '**/*.test.ts'
      - '**/*.spec.ts'
    options:
      cache: false
      runInCI: true
      mergeArgs: 'replace'
      mergeEnv: 'replace'

  dev:
    command: 'robox dev --tunnel'
    args: []
    inputs:
      - 'src/**/*'
    options:
      cache: false
      mergeArgs: 'replace'
      mergeEnv: 'replace'
      runInCI: false

  start:
    command: 'robox start'
    deps:
      - 'build'
    options:
      cache: false
      mergeArgs: 'replace'
      mergeEnv: 'replace'
      runInCI: false
