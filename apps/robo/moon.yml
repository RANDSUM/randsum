$schema: "https://moonrepo.dev/schemas/project.json"

id: robo
language: "typescript"
dependsOn:
  - "roller"
  - "blades"
  - "daggerheart"
  - "fifth"
  - "root-rpg"
  - "salvageunion"

tasks:
  tsCheck:
    deps:
      - "roller:build"
      - "blades:build"
      - "daggerheart:build"
      - "fifth:build"
      - "root-rpg:build"
      - "salvageunion:build"

  publish:
    command: "bun run robox deploy"
    deps:
      - "build"
    options:
      runInCI: false
      cache: false
      mergeArgs: "replace"
      mergeEnv: "replace"

  build:
    command: "bun run robox build"
    deps:
      - "roller:build"
      - "blades:build"
      - "daggerheart:build"
      - "fifth:build"
      - "root-rpg:build"
      - "salvageunion:build"
    options:
      cache: false
      runInCI: false
      allowFailure: false
      mergeArgs: "replace"
      mergeEnv: "replace"

  test:
    command: 'echo "No Tests"'
    deps:
    options:
      cache: false
      runInCI: false
      mergeArgs: "replace"
      mergeEnv: "replace"

  dev:
    command: "bun run robox dev"
    deps:
      - "build"
    options:
      cache: false
  ci:
    deps:
      - "build"
    options:
      cache: false
      runInCI: false
      allowFailure: true
      mergeArgs: "replace"
      mergeEnv: "replace"
