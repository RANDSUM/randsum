---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const examples = await getCollection('examples');

const beginnerExamples = examples.filter(ex => ex.data.difficulty === 'beginner');
const intermediateExamples = examples.filter(ex => ex.data.difficulty === 'intermediate');
const advancedExamples = examples.filter(ex => ex.data.difficulty === 'advanced');
---

<BaseLayout 
  title="Examples - RANDSUM"
  description="Practical examples and tutorials for using RANDSUM in your projects"
>
  <div class="container py-8">
    <header class="mb-12">
      <h1 class="text-4xl font-bold text-white mb-4">Examples</h1>
      <p class="text-xl text-gray-300 max-w-2xl">
        Learn RANDSUM through practical examples, from basic dice rolling to advanced game system integration.
      </p>
    </header>

    <!-- Beginner Examples -->
    {beginnerExamples.length > 0 && (
      <section class="mb-12">
        <h2 class="text-2xl font-semibold text-white mb-6 flex items-center gap-3">
          <span class="badge badge-primary">Beginner</span>
          Getting Started
        </h2>
        <div class="grid md:grid-cols-2 gap-6">
          {beginnerExamples.map((example) => (
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">{example.data.title}</h3>
                <span class="badge badge-secondary text-xs">{example.data.package}</span>
              </div>
              <p class="card-description mb-4">{example.data.description}</p>
              {example.data.tags && (
                <div class="flex gap-1 mb-4">
                  {example.data.tags.map((tag) => (
                    <span class="badge badge-secondary text-xs">{tag}</span>
                  ))}
                </div>
              )}
              <a href={`/examples/${example.slug}`} class="btn btn-primary">
                View Example
              </a>
            </div>
          ))}
        </div>
      </section>
    )}

    <!-- Intermediate Examples -->
    {intermediateExamples.length > 0 && (
      <section class="mb-12">
        <h2 class="text-2xl font-semibold text-white mb-6 flex items-center gap-3">
          <span class="badge badge-warning">Intermediate</span>
          Building Skills
        </h2>
        <div class="grid md:grid-cols-2 gap-6">
          {intermediateExamples.map((example) => (
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">{example.data.title}</h3>
                <span class="badge badge-secondary text-xs">{example.data.package}</span>
              </div>
              <p class="card-description mb-4">{example.data.description}</p>
              {example.data.tags && (
                <div class="flex gap-1 mb-4">
                  {example.data.tags.map((tag) => (
                    <span class="badge badge-secondary text-xs">{tag}</span>
                  ))}
                </div>
              )}
              <a href={`/examples/${example.slug}`} class="btn btn-primary">
                View Example
              </a>
            </div>
          ))}
        </div>
      </section>
    )}

    <!-- Advanced Examples -->
    {advancedExamples.length > 0 && (
      <section class="mb-12">
        <h2 class="text-2xl font-semibold text-white mb-6 flex items-center gap-3">
          <span class="badge badge-error">Advanced</span>
          Expert Techniques
        </h2>
        <div class="grid md:grid-cols-2 gap-6">
          {advancedExamples.map((example) => (
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">{example.data.title}</h3>
                <span class="badge badge-secondary text-xs">{example.data.package}</span>
              </div>
              <p class="card-description mb-4">{example.data.description}</p>
              {example.data.tags && (
                <div class="flex gap-1 mb-4">
                  {example.data.tags.map((tag) => (
                    <span class="badge badge-secondary text-xs">{tag}</span>
                  ))}
                </div>
              )}
              <a href={`/examples/${example.slug}`} class="btn btn-primary">
                View Example
              </a>
            </div>
          ))}
        </div>
      </section>
    )}

    <!-- Quick Start Section -->
    <section class="bg-gray-900 rounded-lg p-8 border border-gray-800">
      <h2 class="text-2xl font-semibold text-white mb-4">New to RANDSUM?</h2>
      <p class="text-gray-300 mb-6">
        Start with our beginner-friendly examples to learn the basics, then work your way up to more advanced techniques.
      </p>
      
      <div class="grid sm:grid-cols-3 gap-4">
        <a href="/docs/installation" class="card hover:border-gray-700">
          <h3 class="card-title text-base">1. Install</h3>
          <p class="card-description text-sm">Get RANDSUM set up in your project</p>
        </a>
        <a href="/docs/quick-start" class="card hover:border-gray-700">
          <h3 class="card-title text-base">2. Learn</h3>
          <p class="card-description text-sm">Understand the basic concepts</p>
        </a>
        <a href="/examples/basic-rolling" class="card hover:border-gray-700">
          <h3 class="card-title text-base">3. Practice</h3>
          <p class="card-description text-sm">Try the examples yourself</p>
        </a>
      </div>
    </section>
  </div>
</BaseLayout>
