---
import Layout from '../layouts/Layout.astro'
import SectionContainer from '../components/ui/SectionContainer.astro'
import MainContent from '../components/MainContent.astro'
import CodeBlock from '../components/ui/CodeBlock.astro'
import SecondaryButton from '../components/ui/SecondaryButton.astro'
---

<Layout
  title="Dice Notation - RANDSUM"
  description="Complete guide to RANDSUM dice notation syntax and modifiers"
>
  <SectionContainer>
    <MainContent class="max-w-4xl">
      <!-- Header -->
      <div class="mb-12">
        <h1 class="text-4xl font-bold text-silver-50 mb-4">
          RANDSUM Dice Notation
        </h1>
        <p class="text-xl text-silver-300 leading-relaxed">
          A comprehensive guide to RANDSUM's powerful dice notation syntax and
          modifiers
        </p>
      </div>

      <!-- Overview -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold text-silver-50 mb-6">Overview</h2>
        <div class="prose prose-invert max-w-none">
          <p class="text-silver-300 leading-relaxed mb-4">
            Dice notation is a compact way to represent dice rolls and their
            modifications. For example, <code
              class="bg-randsum-800 px-2 py-1 rounded text-silver-100"
              >4d20+2</code
            >
            means "roll four twenty-sided dice, then add two".
          </p>
          <p class="text-silver-300 leading-relaxed">
            RANDSUM extends standard dice notation with powerful modifiers like
            dropping lowest rolls, rerolling specific values, and ensuring
            unique results.
          </p>
        </div>
      </section>

      <!-- Basic Syntax -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold text-silver-50 mb-6">Basic Syntax</h2>
        <div class="bg-randsum-800 p-4 rounded-lg mb-6">
          <p class="text-silver-300">
            All notation in RANDSUM is case-insensitive (<code
              class="text-silver-100">2d8</code
            > = <code class="text-silver-100">2D8</code>).
          </p>
        </div>

        <h3 class="text-xl font-semibold text-silver-50 mb-4">
          Standard Rolls
        </h3>
        <CodeBlock background="darker" class="mb-6"
          >// Roll one d20 roll(20) // number argument roll('1d20') // notation
          string roll(&#123; sides: 20, quantity: 1 &#125;) // Roll four d6
          roll('4d6') roll(&#123; sides: 6, quantity: 4 &#125;)</CodeBlock
        >

        <h3 class="text-xl font-semibold text-silver-50 mb-4">
          Custom-Faced Dice
        </h3>
        <p class="text-silver-300 mb-4">Roll dice with non-numeric faces:</p>
        <CodeBlock background="darker" class="mb-4"
          >// Roll a coin (heads/tails) four times import &#123; rollCustomFaces
          &#125; from '@randsum/dice' rollCustomFaces('4d&#123;HT&#125;')
          rollCustomFaces(&#123; sides: ['H', 'T'], quantity: 4 &#125;) // Roll
          Fudge/Fate dice rollCustomFaces('4d&#123;++-- &#125;') // Plus, minus,
          blank faces rollCustomFaces(&#123; sides: ['+', '+', '-', '-', ' ', '
          '], quantity: 4 &#125;)</CodeBlock
        >
        <div class="bg-amber-900/20 border border-amber-600/30 rounded-lg p-4">
          <p class="text-amber-200">
            <strong>Note:</strong> Custom-faced dice ignore modifiers and always
            return a total of 0.
          </p>
        </div>
      </section>

      <!-- Modifiers -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold text-silver-50 mb-6">Modifiers</h2>

        <h3 class="text-xl font-semibold text-silver-50 mb-4">
          Basic Arithmetic
        </h3>
        <CodeBlock background="darker" class="mb-6"
          >roll('4d6+2') // Add 2 to total roll(&#123; sides: 6, quantity: 4,
          modifiers: &#123; plus: 2 &#125; &#125;) roll('4d6-1') // Subtract 1
          from total roll(&#123; sides: 6, quantity: 4, modifiers: &#123; minus:
          1 &#125; &#125;)</CodeBlock
        >

        <h3 class="text-xl font-semibold text-silver-50 mb-4">Cap Modifiers</h3>
        <p class="text-silver-300 mb-4">
          Limit roll values to specific ranges:
        </p>
        <CodeBlock background="darker" class="mb-6"
          >roll('4d20C&#123;&gt;18&#125;') // Cap rolls over 18 to 18
          roll(&#123; sides: 20, quantity: 4, modifiers: &#123; cap: &#123;
          greaterThan: 18 &#125; &#125; &#125;) roll('4d20C&#123;&lt;3&#125;')
          // Cap rolls under 3 to 3 roll(&#123; sides: 20, quantity: 4,
          modifiers: &#123; cap: &#123; lessThan: 3 &#125; &#125; &#125;)
          roll('4d20C&#123;&lt;2,&gt;19&#125;') // Cap rolls under 2 to 2 and
          over 19 to 19</CodeBlock
        >

        <h3 class="text-xl font-semibold text-silver-50 mb-4">
          Drop Modifiers
        </h3>
        <p class="text-silver-300 mb-4">Drop specific dice from the results:</p>
        <CodeBlock background="darker" class="mb-6"
          >roll('4d6L') // Drop lowest roll(&#123; sides: 6, quantity: 4,
          modifiers: &#123; drop: &#123; lowest: 1 &#125; &#125; &#125;)
          roll('4d6L2') // Drop 2 lowest roll('4d6H') // Drop highest
          roll('4d6H2') // Drop 2 highest // Drop by value
          roll('4d20D&#123;&gt;17&#125;') // Drop rolls over 17
          roll('4d20D&#123;&lt;5&#125;') // Drop rolls under 5
          roll('4d20D&#123;8,12&#125;') // Drop 8s and 12s</CodeBlock
        >

        <h3 class="text-xl font-semibold text-silver-50 mb-4">
          Reroll Modifiers
        </h3>
        <p class="text-silver-300 mb-4">
          Reroll dice matching certain conditions:
        </p>
        <CodeBlock background="darker" class="mb-6"
          >roll('4d20R&#123;&gt;17&#125;') // Reroll results over 17
          roll('4d20R&#123;&lt;5&#125;') // Reroll results under 5
          roll('4d20R&#123;8,12&#125;') // Reroll 8s and 12s
          roll('4d20R&#123;&lt;5&#125;3') // Reroll under 5, max 3 attempts</CodeBlock
        >

        <h3 class="text-xl font-semibold text-silver-50 mb-4">
          Exploding Dice
        </h3>
        <p class="text-silver-300 mb-4">
          Reroll and add when maximum value is rolled:
        </p>
        <CodeBlock background="darker" class="mb-6"
          >roll('4d6!') // Explode on 6s roll('4d10!') // Explode on 10s
          roll('4d20!') // Explode on 20s</CodeBlock
        >

        <h3 class="text-xl font-semibold text-silver-50 mb-4">
          Unique Results
        </h3>
        <p class="text-silver-300 mb-4">
          Ensure all dice show different values:
        </p>
        <CodeBlock background="darker" class="mb-6"
          >roll('4d20U') // All different results roll('5d6U') // All different
          results (if possible)</CodeBlock
        >
      </section>

      <!-- Common Examples -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold text-silver-50 mb-6">Common Examples</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="bg-randsum-800 rounded-lg p-6">
            <h4 class="text-lg font-semibold text-silver-50 mb-3">
              D&D Ability Scores
            </h4>
            <code class="text-silver-100">4d6L</code>
            <p class="text-silver-300 text-sm mt-2">Roll 4d6, drop lowest</p>
          </div>
          <div class="bg-randsum-800 rounded-lg p-6">
            <h4 class="text-lg font-semibold text-silver-50 mb-3">
              D&D Advantage
            </h4>
            <code class="text-silver-100">2d20H</code>
            <p class="text-silver-300 text-sm mt-2">Roll 2d20, keep highest</p>
          </div>
          <div class="bg-randsum-800 rounded-lg p-6">
            <h4 class="text-lg font-semibold text-silver-50 mb-3">
              Damage + Modifier
            </h4>
            <code class="text-silver-100">1d8+3</code>
            <p class="text-silver-300 text-sm mt-2">Roll 1d8, add 3</p>
          </div>
          <div class="bg-randsum-800 rounded-lg p-6">
            <h4 class="text-lg font-semibold text-silver-50 mb-3">
              Exploding Damage
            </h4>
            <code class="text-silver-100">2d6!</code>
            <p class="text-silver-300 text-sm mt-2">Roll 2d6, explode on 6s</p>
          </div>
        </div>
      </section>

      <!-- Navigation -->
      <div
        class="flex justify-between items-center pt-8 border-t border-randsum-700"
      >
        <SecondaryButton href="/" class="flex items-center">
          ← Back to Home
        </SecondaryButton>
        <SecondaryButton href="/roller" class="flex items-center">
          Explore Roller Package →
        </SecondaryButton>
      </div>
    </MainContent>
  </SectionContainer>
</Layout>
