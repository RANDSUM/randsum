---
import DocsLayout from '../../layouts/DocsLayout.astro'
import CodeExample from '../../components/CodeExample.astro'
import { getPackageById } from '../../utils/packageData'

const pkg = getPackageById('robo')!
---

<DocsLayout title={pkg.displayName} description={pkg.description} package={pkg}>
  <section>
    <h2>Overview</h2>
    <p>
      <strong>RANDSUM Robo</strong> is a Discord bot and activity that brings dice rolling directly into
      your Discord server. Built with <a
        href="https://robojs.dev"
        target="_blank"
        rel="noopener noreferrer">Robo.js</a
      >, it provides beautiful embeds, detailed roll breakdowns, and full support for all RANDSUM
      game packages.
    </p>
    <p>
      Whether you're running a D&D campaign, playing Blades in the Dark, or exploring other tabletop
      RPGs, Robo makes it easy to roll dice right in your Discord chat with rich, informative
      results.
    </p>
  </section>

  <section>
    <h2>Installation</h2>
    <div class="install-options">
      <div class="install-option">
        <h3>Quick Install (Recommended)</h3>
        <p>Add RANDSUM Robo to your Discord server with one click. No setup required!</p>
        <a
          href="https://discord.com/oauth2/authorize?client_id=1290434147159904276&permissions=274877906944&scope=bot%20applications.commands"
          target="_blank"
          rel="noopener noreferrer"
          class="discord-invite-button"
        >
          <svg class="discord-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"
            ></path>
          </svg>
          Add to Discord
        </a>
      </div>
      <div class="install-option">
        <h3>Self-Hosted Installation</h3>
        <CodeExample
          code={pkg.examples.find(e => e.title === 'Installation')?.code || ''}
          language="bash"
          title="Installation"
        />
        <p>
          For detailed setup instructions, see the <a
            href="https://github.com/RANDSUM/randsum/tree/main/packages/robo"
            target="_blank"
            rel="noopener noreferrer">Robo repository</a
          >.
        </p>
      </div>
    </div>
  </section>

  <section>
    <h2>Commands</h2>
    <p>
      Robo provides a comprehensive set of commands for rolling dice and accessing game-specific
      mechanics:
    </p>

    <h3>/roll</h3>
    <p>
      The core dice rolling command. Supports full RANDSUM dice notation with detailed breakdowns
      showing individual die results, modifiers, and final totals.
    </p>
    <CodeExample
      code={`/roll notation:4d6L+2
/roll notation:2d20H
/roll notation:3d8+5`}
      language="bash"
      title="Roll Command Examples"
    />
    <div class="example-image">
      <img
        src="/robo-roll-example.png"
        alt="Discord bot showing a dice roll result with detailed breakdown. Shows 'You rolled a 15' with rolls [5,1,6,2] before modifiers and [2,5,6] after modifiers, notation 4d6+2L"
      />
      <p class="image-caption">
        Example: Roll command showing detailed breakdown of 4d6L+2 with before/after modifier
        results
      </p>
    </div>

    <h3>/blades</h3>
    <p>
      Roll Blades in the Dark action rolls. Takes the number of dice in your pool and returns the
      outcome (critical, success, partial, or failure) with color-coded embeds.
    </p>
    <CodeExample
      code={`/blades dice:3
/blades dice:2
/blades dice:0  # Desperate position (rolls 2d6, takes lowest)`}
      language="bash"
      title="Blades Command Examples"
    />

    <h3>/su</h3>
    <p>
      Roll on Salvage Union tables. Supports all Salvage Union tables including Core Mechanic,
      Morale, and other game-specific tables. Returns hit types (Nailed It, Success, Tough Choice)
      with descriptions.
    </p>
    <CodeExample
      code={`/su table:Core Mechanic
/su table:Morale
/su  # Uses default table`}
      language="bash"
      title="Salvage Union Command Examples"
    />
    <div class="example-image">
      <img
        src="/robo-su-example.png"
        alt="Discord bot showing a Salvage Union table roll result. Shows '16 - Success' with description 'You have achieved your goal without any compromises. When attacking, you hit the target and deal standard damage.' Table: Core Mechanic, Roll: 16"
      />
      <p class="image-caption">
        Example: Salvage Union table roll showing "16 - Success" result with detailed description
      </p>
    </div>

    <h3>/root</h3>
    <p>
      Roll Root RPG mechanics. Rolls 2d6 with an optional modifier (-4 to +4) and returns the
      outcome (Strong Hit, Weak Hit, or Miss) with color-coded embeds and narrative descriptions.
    </p>
    <CodeExample
      code={`/root modifier:2
/root modifier:-1
/root  # No modifier`}
      language="bash"
      title="Root RPG Command Examples"
    />

    <h3>/dh</h3>
    <p>
      Roll Daggerheart mechanics with hope and fear dice. Supports modifiers,
      advantage/disadvantage, and the ability to amplify hope or fear dice (using d20 instead of
      d12).
    </p>
    <CodeExample
      code={`/dh modifier:5 rollingWith:Advantage
/dh modifier:3 rollingWith:Disadvantage
/dh amplifyHope:true amplifyFear:false
/dh modifier:2`}
      language="bash"
      title="Daggerheart Command Examples"
    />

    <h3>/notation</h3>
    <p>
      Display a reference guide for RANDSUM dice notation. Shows all available modifiers, syntax,
      and examples to help users learn the notation system.
    </p>
    <CodeExample code={`/notation`} language="bash" title="Notation Reference Command" />
  </section>

  <section>
    <h2>Game Package Support</h2>
    <p>
      <strong>All RANDSUM game packages are fully supported in Robo:</strong>
    </p>
    <ul>
      <li>
        <strong>@randsum/blades</strong> - Blades in the Dark action rolls with position and effect
      </li>
      <li><strong>@randsum/daggerheart</strong> - Daggerheart hope and fear dice mechanics</li>
      <li>
        <strong>@randsum/fifth</strong> - D&D 5th Edition ability checks, saving throws, and combat rolls
      </li>
      <li><strong>@randsum/root-rpg</strong> - Root RPG reputation and relationship mechanics</li>
      <li><strong>@randsum/salvageunion</strong> - Salvage Union table rolls and mech combat</li>
    </ul>
    <p>
      Each game package has dedicated commands that provide game-specific results, color-coded
      embeds, and detailed breakdowns tailored to that system's mechanics.
    </p>
  </section>

  <section>
    <h2>Features</h2>
    <ul>
      <li>
        <strong>Detailed Breakdowns:</strong> Shows individual die results, modifiers, and step-by-step
        calculations
      </li>
      <li>
        <strong>Full Notation Support:</strong> All RANDSUM dice notation features (drop, reroll, explode,
        etc.)
      </li>
      <li>
        <strong>Game-Specific Commands:</strong> Dedicated commands for each supported RPG system
      </li>
      <li>
        <strong>Type Safety:</strong> Built with TypeScript for reliability and maintainability
      </li>
    </ul>
  </section>

  <section>
    <h2>Examples</h2>
    {
      pkg.examples
        .filter(e => e.title !== 'Installation')
        .map(example => {
          return (
            <CodeExample code={example.code} language={example.language} title={example.title} />
          )
        })
    }
  </section>

  <section>
    <h2>Resources</h2>
    <ul>
      <li>
        <a href="https://github.com/RANDSUM/randsum/tree/main/packages/robo" target="_blank" rel="noopener noreferrer"
          >GitHub Repository</a
        >
      </li>
      <li>
        <a href="https://robojs.dev" target="_blank" rel="noopener noreferrer"
          >Robo.js Documentation</a
        >
      </li>
      <li>
        <a href="https://github.com/RANDSUM/randsum" target="_blank" rel="noopener noreferrer"
          >RANDSUM Packages</a
        >
      </li>
    </ul>
  </section>
</DocsLayout>

<style>
  .example-image {
    margin: var(--spacing-lg) 0;
    border: var(--border-width-thick) solid var(--color-border);
    padding: var(--spacing-md);
    background-color: var(--color-bg-alt);
    box-shadow: var(--shadow-kirby);
  }

  .example-image img {
    width: 100%;
    height: auto;
    display: block;
    border: var(--border-width) solid var(--color-border-light);
  }

  .image-caption {
    margin-top: var(--spacing-sm);
    font-size: var(--font-size-sm);
    color: var(--color-text-alt);
    font-style: italic;
    text-align: center;
  }

  h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    padding-bottom: var(--spacing-xs);
    border-bottom: var(--border-width) solid var(--color-border);
  }

  /* Discord-style button */
  .discord-invite-button {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-lg);
    background-color: #5865f2;
    color: #ffffff;
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-base);
    text-decoration: none;
    border-radius: 4px;
    transition:
      background-color 0.2s ease,
      transform 0.1s ease;
    white-space: nowrap;
    box-shadow: 0 2px 4px rgba(88, 101, 242, 0.3);
  }

  .discord-invite-button:hover {
    background-color: #4752c4;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(88, 101, 242, 0.4);
  }

  .discord-invite-button:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(88, 101, 242, 0.3);
  }

  .discord-icon {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
  }

  .install-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-xl);
    margin-top: var(--spacing-lg);
    align-items: start;
  }

  .install-option {
    padding: var(--spacing-lg);
    border: var(--border-width-thick) solid var(--color-border);
    background-color: var(--color-bg-alt);
    box-shadow: var(--shadow-kirby);
    display: flex;
    flex-direction: column;
  }

  .install-option h3 {
    margin-top: 0;
    margin-bottom: var(--spacing-md);
    font-size: var(--font-size-xl);
  }

  .install-option p {
    margin-bottom: var(--spacing-md);
  }

  @media (max-width: 1024px) {
    .install-options {
      grid-template-columns: 1fr;
    }

    .docs-header-content {
      flex-direction: column;
    }

    .discord-invite-button {
      width: 100%;
      justify-content: center;
    }
  }
</style>
