---
import DocsLayout from '../../layouts/DocsLayout.astro'
import CodeExample from '../../components/CodeExample.astro'
import LiveCodeExample from '../../components/LiveCodeExample.astro'
import { getPackageById } from '../../utils/packageData'
import { getTemplateCode } from '../../utils/templateLoader'

const pkg = getPackageById('root-rpg')!
const templateCode = getTemplateCode('root-rpg')
---

<DocsLayout title={pkg.displayName} description={pkg.description} package={pkg}>
  <section>
    <h2>Overview</h2>
    <p>
      <strong>@randsum/root-rpg</strong> implements the Root RPG system, featuring reputation mechanics,
      relationship tracking, and advancement systems. This package provides all the tools needed to run
      Root RPG games, including faction relationships, reputation rolls, and character advancement.
    </p>
  </section>

  <section>
    <h2>Installation</h2>
    <CodeExample
      code={pkg.examples.find(e => e.title === 'Installation')?.code || ''}
      language="bash"
      title="Installation"
    />
  </section>

  <section>
    <h2>Examples</h2>
    {
      pkg.examples
        .filter(e => e.title !== 'Installation')
        .map(example => {
          return (
            <>
              <CodeExample code={example.code} language={example.language} title={example.title} />
              {example.hasLiveExample && (
                <LiveCodeExample
                  packageName={pkg.id}
                  initialCode={templateCode}
                  title={`Try it Live: ${example.title}`}
                />
              )}
            </>
          )
        })
    }
  </section>
</DocsLayout>
